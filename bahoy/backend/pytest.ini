[pytest]
# ─────────────────────────────────────────────────────────────────────────────
# Bahoy Backend - Configuración de pytest
# ─────────────────────────────────────────────────────────────────────────────
#
# Ejecutar la suite completa (dentro del contenedor):
#   docker-compose exec backend pytest
#
# Con cobertura de código:
#   docker-compose exec backend pytest --cov=app --cov-report=term-missing
#
# Solo un archivo:
#   docker-compose exec backend pytest tests/test_models.py -v
#
# Filtrar por nombre:
#   docker-compose exec backend pytest -k "test_crear_evento" -v
# ─────────────────────────────────────────────────────────────────────────────

# Modo asyncio: auto aplica @pytest.mark.asyncio a todos los tests async
# sin necesidad de decorar cada función manualmente.
asyncio_mode = auto

# Directorio raíz de los tests
testpaths = tests

# Mostrar output de print() durante los tests
log_cli = false

# Formato de los IDs de test
console_output_style = progress

# Marcar tests lentos para poder excluirlos con -m "not slow"
markers =
    slow: Tests que requieren modelos NLP o conexión a servicios externos
    integration: Tests de integración que requieren base de datos real
    unit: Tests unitarios sin dependencias externas

# Filtros de advertencias
filterwarnings =
    ignore::DeprecationWarning:scrapy.*:
    ignore::UserWarning:torch.*:
    ignore::FutureWarning:transformers.*:
    ignore::DeprecationWarning:pydantic.*:
